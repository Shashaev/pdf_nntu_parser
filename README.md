# PDF_NNTU_Parser

## О проекте

Проект представляет собой сервис для сбора и обработки информации с [официального сайта НГТУ им. Р.Е. Алексеева](https://www.nntu.ru). В данный монет акцент смещен в сторону информации об [учебный планах и РПД](https://www.nntu.ru/sveden/education/).

## Принцип работы

Что бы потдерживать *актуальность данных* при запуске программы стартует **событийный цикл**, который исполняет различные **события** с определенной частотой.

*Событие* - функция, которая обёрнута в декоратор `registration.run`.

Декоратор имеет следующую структуру:
```python
def run(
    max_count: int = 1,
    delay_time: float = 0,
    endless_execution: bool = False,
):
```
Принимаемые параметры:
- max_count: определяет максимальное кол-во раз, которое будет вызвана функция
- delay_time: указывает на задержку (*в секундах*), которая будет сделана между вызовами функции
- endless_execution: если функцию нужно исполнять без ограничения в кол-ве раз, то ставиться значение `True`

Все *события* собраны в папке `src/parsing_app/events` и разделены на несколько групп:
1. События для парсинга сайта - `events/web_pages`.
2. События для парсинга информации из **pdf файлов** - `events/pdf`
3. События для постобработки полученных данных - `events/post_processing`

Событие испольняются только при импорте их модуля, если вам не нужно исполнения конкретных событий или их групп, то можете закоментировать импорт в файлах:
- `parsing_app/events/__init__.py`
- `parsing_app/events/pdf/__init__.py`
- `parsing_app/events/web_pages/__init__.py`
- `parsing_app/events/post_processing/__init__.py`

Все данные, которые будут получены, кроме *pdf файлов* (они складываются в отдельную папку `src/parsing_app/data/pdf`), будут добавлены, и вследствии храниться, в *БД* (по умолчанию используется **SQLite**).

Для *изменения настроек путей* или использования **другой БД**, нужно изменить параметры в файле `parsing_app/settings.py`.

Так присутствуют настройки:
- **PATH_ROOT**: путь, от которого будут откладываться все остальные, *по умолчанию* это путь до папки, в которой находиться файл с настройками
- **PATH_DATA**: путь до папки с данными, которые будут получены в результате работы программы
- **PATH_PDF**: путь до папки, в которую будут складываться все pdf файлы
- **PATH_PDF_EDUCATIONAL_PROGRAM**: путь до папки, в которую будут складываться pdf файлы программ обучения
- **PATH_PDF_RPD**: путь до папки, в которую будут складываться pdf файлы РПД
- **USE_POSTGRESQL**: флаг, если `False`, то используется **SQLite**, иначе **PostgreSQL** (но для этого нужно определить следующие параметры)
- **DB_USER**: имя пользователя в БД PostgreSQL
- **DB_PASSWORD**: пароль от пользователя
- **DB_HOST**: хост PostgreSQL
- **DB_PORT**: порт
- **DB_NAME**: имя БД

Пути откладываются относительно настроек более высокого уровня. К примеру, при сохранении РПД будет использоваться папка по следующему пути - `PATH_ROOT / PATH_DATA / PATH_PDF / PATH_PDF_RPD`.

## Что нужно для запуска?
- [Git](https://git-scm.com/downloads)
- [Python>=3.10](https://www.python.org/downloads/)

## Запуск проекта
1. Клонирование репозитория с github
```bash
git clone https://github.com/Shashaev/pdf_nntu_parser.git
```
2. Переход в конеть проекта
```bash
cd PDF_NNTU_PARSER
```
3. Создание виртуального октужения
- **Windows**
```bash
    python -m venv venv
```
   - **Linux/macOS**
```bash
    python3 -m venv venv
```
4. Активация виртуального окружения
  - **Windows**
```bash
    venv\Scripts\activate
```
  - **Linux/macOS**
```bash
    source venv/bin/activate
```
5. Устоновка зависимостей
```bash
pip install -r requirements.txt
```
6. Запуск работы
- **Windows**
```bash
    python src/parsing_app/main.py
```
- **Linux/macOS**
```bash
    python3 src/parsing_app/main.py
```
